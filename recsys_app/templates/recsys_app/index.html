<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>User-based Recommendation System | TAU | NLF</title>
		<style>
			body {
				display: flex;
				justify-content: center;
				align-items: flex-start;
				height: 100vh;
				margin: 0;
				padding-top: 50px; /* Add padding to the top */
			}
			.container {
				text-align: center;
			}
			.image-container {
				display: flex;
				justify-content: space-between;
				gap: 5px; /* Adjust the padding space between images */
			}
			img {
				margin-bottom: 60px;
			}
			form {
				margin-top: 20px;
			}
			input[type="text"] {
				width: 850px;
				height: 25px;
				font-size: 20px;
				padding: 10px;
				font-weight: bold;
				font-family: Ubuntu;
			}
			.button-container {
				display: flex;
				justify-content: center;
				align-items: center;
				gap: 50px; /* space between buttons */
				margin-top: 30px; /* margin to the top of the buttons */
			}
			input[type="button"] {
				width: 200px; /* Increase button width */
				height: 50px;
				font-size: 20px; /* Increase button font size */
				font-weight: bold;
				background-color: darkgray;
				color: rgb(0, 0, 0);
				border: none;
				cursor: pointer;
			}
			#libraryLinkContainer {
				margin-top: 20px; /* Add margin to the top of the link container */
				font-size: 20px; /* Increase libraryLink font size */
				font-weight: bold;
			}
			#recommendationText {
					color: green; /* Change the color to green */
					font-weight: bold; /* Make the text bold */
					margin-top: 30px; /* Add margin from the top */
					font-size: 18px; /* Increase libraryLink font size */
			}
			#recommendationText b {
					color: rgb(0, 85, 0); /* Change the color to green */
					font-weight: bold; /* Make the text bold */
					font-style: italic; /* Make the text italic */
					font-size: 30px;
			}
			input[type="submit"] {
				width: 200px;
				height: 50px;
				font-size: 20px;
				font-weight: bold;
				background-color: darkgray;
				color: rgb(0, 0, 0);
				border: none;
				cursor: pointer;
			}
		</style>
	</head>
<body>

	<div class="container">
		<div class="image-container">
			<img src="{{ left_image_url }}" alt="Left Image" width="200" height="200">
			<img src="{{ right_image_url }}" alt="Right Image" width="200" height="200">
		</div>

		<h2>{{ welcome_text|safe }}</h2>
		<form method="post" action="{% url 'index' %}" id="searchForm">
			<input type="hidden" name="isRecSys" id="isRecSys" value="false">
			{% csrf_token %}
			<input type="text" name="query" placeholder="Enter your query keywords here...">
			<div class="button-container">
				<input type="button" value="Search NLF" onclick="searchNLF()">
				<input type="button" value="Clear" onclick="cleanSearch()">
			</div>
			<div id="libraryLinkContainer"></div>
			<div class="button-container">
				<input type="submit" value="Recommend Me" onclick="recommendMe(event)">
				<input type="button" value="Clear" onclick="cleanRecSys()">
			</div>
			<div id="recsysContainer">
				{% if recommendation_results %}
					<p>Since you Searched:<br>{{input_query}}<br>You might be also interested in: <br>{{recommendation_results}}</p>
				{% endif %}
			</div>

		</form>
	</div>

	<script>
		function searchNLF() {
			var query = document.getElementsByName("query")[0].value.trim();
			if (query !== "") {
				var libraryLinkContainer = document.getElementById("libraryLinkContainer");
				var libLink = "https://digi.kansalliskirjasto.fi/search?query=" + encodeURIComponent(query)
				libraryLinkContainer.innerHTML = "<a href='" + libLink + "' target='_blank'>Click here to open National Library Result(s)</a>";
			} else {
					alert('Oops! Enter a valid search query to proceed!');
				}
		}
		function cleanSearch() {
			document.getElementById("libraryLinkContainer").innerHTML = "";
			document.getElementsByName("query")[0].value = "";
			document.getElementsByName("query")[0].placeholder = "Enter your query keywords here...";
		}
		function recommendMe(event) {
			var query = document.getElementsByName("query")[0].value.trim();
			document.getElementById("isRecSys").value = true; // Update the hidden input field
			if (query !== "") {
				document.getElementById("searchForm").submit();
			} else {
					alert('Oops! Enter a valid search query to proceed!');
					event.preventDefault();
				}
		}
		function cleanRecSys() {
			document.getElementsByName("query")[0].value = "";
			document.getElementsByName("query")[0].placeholder = "Enter your query keywords here...";
			document.getElementById("recsysContainer").innerHTML = "";
		}
	</script>

</body>
</html>